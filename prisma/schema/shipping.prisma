
model Fulfillment {
  id      String @id @default(cuid())
  orderId String // Foreign Key to Order
  order   Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)


  provider       ShippingProvider @default(EASYPOST)
  providerId     String?          @unique
  items          OrderItem[]
  status         ShipmentStatus
  trackingNumber String?
  trackingUrl    String?
  labelUrl       String?
  carrier        String?
  cost           Int?
  timeEstimate   String?
  shippedAt      DateTime?
  expireAt       DateTime?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt

  @@index([orderId])
}

enum ShippingProvider {
  SHIPPO
  EASYPOST
  KARRIO
}

enum ShipmentStatus {
  LABEL_PRINTED
  LABEL_PURCHASED
  ATTEMPTED_DELIVERY
  READY_FOR_PICKUP
  CONFIRMED
  PRE_TRANSIT
  IN_TRANSIT
  OUT_FOR_DELIVERY
  DELIVERED
  FAILURE
  UNKNOWN
  CANCELLED
  RETURNED
  HELD
  DELAYED
  LOST
  ARRIVED_AT_FACILITY
}
